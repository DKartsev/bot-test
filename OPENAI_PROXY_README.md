# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ OpenAI API —á–µ—Ä–µ–∑ HTTP-–ø—Ä–æ–∫—Å–∏

–≠—Ç–æ—Ç –Ω–∞–±–æ—Ä —Å–∫—Ä–∏–ø—Ç–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ OpenAI API —á–µ—Ä–µ–∑ HTTP-–ø—Ä–æ–∫—Å–∏.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∫—Å–∏

- **–ü—Ä–æ—Ç–æ–∫–æ–ª**: HTTP
- **–ê–¥—Ä–µ—Å**: 193.233.115.178
- **–ü–æ—Ä—Ç**: 11403
- **–õ–æ–≥–∏–Ω**: aUGIll6zoH
- **–ü–∞—Ä–æ–ª—å**: KFu2uvbHBx

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install openai https-proxy-agent

# –ò–ª–∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ package.json –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ
cp test-package.json package.json
npm install
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –°–ø–æ—Å–æ–± 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
chmod +x setup-proxy-env.sh
source setup-proxy-env.sh

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ API –∫–ª—é—á OpenAI
export OPENAI_API_KEY="your-api-key-here"
```

### –°–ø–æ—Å–æ–± 2: –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export HTTPS_PROXY="http://aUGIll6zoH:KFu2uvbHBx@193.233.115.178:11403"
export HTTP_PROXY="http://aUGIll6zoH:KFu2uvbHBx@193.233.115.178:11403"
export OPENAI_API_KEY="your-api-key-here"
```

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –°–ø–æ—Å–æ–± 1: –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
node test-openai-proxy.js
```

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ npm —Å–∫—Ä–∏–ø—Ç

```bash
# –ó–∞–ø—É—Å–∫ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –ø—Ä–æ–∫—Å–∏
npm run test-with-env
```

### –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ source

```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –≤ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ
source setup-proxy-env.sh && node test-openai-proxy.js
```

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Ç–µ—Å—Ç

1. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** –∫ OpenAI API —á–µ—Ä–µ–∑ HTTP-–ø—Ä–æ–∫—Å–∏
2. **–ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π** –∏ –∏—â–µ—Ç gpt-4o-mini
3. **–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ** "Hello from VM" –≤ gpt-4o-mini
4. **–í—ã–≤–æ–¥–∏—Ç –æ—Ç–≤–µ—Ç** –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ:

```
üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∫—Å–∏:
   Host: 193.233.115.178:11403
   Username: aUGIll6zoH
   Proxy URL: http://aUGIll6zoH:***@193.233.115.178:11403

üöÄ –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ OpenAI API —á–µ—Ä–µ–∑ HTTP-–ø—Ä–æ–∫—Å–∏...

üìã –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π...
‚úÖ –ü–æ–ª—É—á–µ–Ω–æ X –º–æ–¥–µ–ª–µ–π
‚úÖ –ú–æ–¥–µ–ª—å gpt-4o-mini –Ω–∞–π–¥–µ–Ω–∞: gpt-4o-mini

üí¨ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ gpt-4o-mini...
‚úÖ –û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω:
   –ú–æ–¥–µ–ª—å: gpt-4o-mini
   –û—Ç–≤–µ—Ç: Hello! How can I help you today?
   –¢–æ–∫–µ–Ω—ã: 15 (prompt: 8, completion: 7)

üéâ –¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω! OpenAI API —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ HTTP-–ø—Ä–æ–∫—Å–∏.
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ "API key not found"
```bash
export OPENAI_API_KEY="your-actual-api-key"
```

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ø—Ä–æ–∫—Å–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–∫—Å–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç 11403 –æ—Ç–∫—Ä—ã—Ç

### –û—à–∏–±–∫–∞ 403 Forbidden
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å API –∫–ª—é—á–∞ OpenAI
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∞–∫–∫–∞—É–Ω—Ç OpenAI –∞–∫—Ç–∏–≤–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–æ–∫—Å–∏ –æ–±—Ö–æ–¥–∏—Ç –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–µ–∫—Ç

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–±–∞–≤—å—Ç–µ –≤ `packages/backend/src/services/openai.ts`:

```typescript
import { HttpsProxyAgent } from 'https-proxy-agent';

const proxyUrl = 'http://aUGIll6zoH:KFu2uvbHBx@193.233.115.178:11403';
const httpsAgent = new HttpsProxyAgent(proxyUrl);

// –í –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ OpenAI
const openai = new OpenAI({
  apiKey: process.env.OPENAI_API_KEY,
  httpAgent: httpsAgent,
});
```
