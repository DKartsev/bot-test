# –ü–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

- **Statements**: 14.34% ‚Üí –¶–µ–ª—å: 80%
- **Branches**: 43.89% ‚Üí –¶–µ–ª—å: 80%
- **Functions**: 25.22% ‚Üí –¶–µ–ª—å: 80%
- **Lines**: 14.34% ‚Üí –¶–µ–ª—å: 80%

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### üî¥ –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å)

#### 1. RAG Pipeline (ragAnswer.ts)
- **–¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ**: 92.33%
- **–¶–µ–ª—å**: 95%
- **–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å**:
  - –¢–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö fallback —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
  - –¢–µ—Å—Ç—ã –æ—à–∏–±–æ–∫ OpenAI API
  - –¢–µ—Å—Ç—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤ –ë–î

#### 2. Vector Store (vector-store.ts)
- **–¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ**: 0%
- **–¶–µ–ª—å**: 90%
- **–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å**:
  - –¢–µ—Å—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ HNSW
  - –¢–µ—Å—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤–µ–∫—Ç–æ—Ä–æ–≤
  - –¢–µ—Å—Ç—ã –ø–æ–∏—Å–∫–∞
  - –¢–µ—Å—Ç—ã fallback –±–µ–∑ hnswlib-node

#### 3. Embedder (embedder.ts)
- **–¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ**: 89.51%
- **–¶–µ–ª—å**: 95%
- **–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å**:
  - –¢–µ—Å—Ç—ã –æ—à–∏–±–æ–∫ OpenAI
  - –¢–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤
  - –¢–µ—Å—Ç—ã –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–µ–∫—Ç–æ—Ä–æ–≤

### üü° –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–≤–∞–∂–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª)

#### 4. Admin Routes
- **–¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ**: 0%
- **–¶–µ–ª—å**: 85%
- **–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å**:
  - –¢–µ—Å—Ç—ã CRUD –æ–ø–µ—Ä–∞—Ü–∏–π
  - –¢–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  - –¢–µ—Å—Ç—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
  - –¢–µ—Å—Ç—ã multipart –∑–∞–≥—Ä—É–∑–∫–∏

#### 5. Middleware
- **–¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ**: 0%
- **–¶–µ–ª—å**: 90%
- **–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å**:
  - –¢–µ—Å—Ç—ã IP allowlist
  - –¢–µ—Å—Ç—ã rate limiting
  - –¢–µ—Å—Ç—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
  - –¢–µ—Å—Ç—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

#### 6. Error Handler
- **–¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ**: 0%
- **–¶–µ–ª—å**: 95%
- **–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å**:
  - –¢–µ—Å—Ç—ã –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
  - –¢–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
  - –¢–µ—Å—Ç—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### üü¢ –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–¥)

#### 7. Utils
- **–¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ**: 0%
- **–¶–µ–ª—å**: 80%
- **–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å**:
  - –¢–µ—Å—Ç—ã helper —Ñ—É–Ω–∫—Ü–∏–π
  - –¢–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
  - –¢–µ—Å—Ç—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### 8. Config
- **–¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ**: 0%
- **–¶–µ–ª—å**: 80%
- **–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å**:
  - –¢–µ—Å—Ç—ã –∑–∞–≥—Ä—É–∑–∫–∏ env
  - –¢–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
  - –¢–µ—Å—Ç—ã fallback –∑–Ω–∞—á–µ–Ω–∏–π

## –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –§–∞–∑–∞ 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å (1-2 –Ω–µ–¥–µ–ª–∏)
1. ‚úÖ –£–ª—É—á—à–∏—Ç—å —Ç–µ—Å—Ç—ã ragAnswer.ts
2. üîÑ –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã vector-store.ts
3. üîÑ –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã embedder.ts

### –§–∞–∑–∞ 2: –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (2-3 –Ω–µ–¥–µ–ª–∏)
4. üîÑ –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã admin routes
5. üîÑ –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã middleware
6. üîÑ –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã error handler

### –§–∞–∑–∞ 3: –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–¥ (1-2 –Ω–µ–¥–µ–ª–∏)
7. üîÑ –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã utils
8. üîÑ –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã config

## –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

### –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ —Ü–µ–ª–∏
- **–ù–µ–¥–µ–ª—è 1**: 25% –ø–æ–∫—Ä—ã—Ç–∏—è
- **–ù–µ–¥–µ–ª—è 2**: 45% –ø–æ–∫—Ä—ã—Ç–∏—è
- **–ù–µ–¥–µ–ª—è 3**: 65% –ø–æ–∫—Ä—ã—Ç–∏—è
- **–ù–µ–¥–µ–ª—è 4**: 80% –ø–æ–∫—Ä—ã—Ç–∏—è

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—É—Ç–∏ –ø–æ–∫—Ä—ã—Ç—ã
- ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- ‚úÖ Edge cases –ø–æ–∫—Ä—ã—Ç—ã
- ‚úÖ Error scenarios –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã

## –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –ø–æ–¥—Ö–æ–¥—ã

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
1. **Unit —Ç–µ—Å—Ç—ã** - –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
2. **Integration —Ç–µ—Å—Ç—ã** - –¥–ª—è API endpoints
3. **Mock —Ç–µ—Å—Ç—ã** - –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
4. **Error —Ç–µ—Å—Ç—ã** - –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

### –ú–æ–∫–∏ –∏ —Ñ–∏–∫—Å—Ç—É—Ä—ã
- OpenAI API - –º–æ–∫ responses
- PostgreSQL - –º–æ–∫ queries
- Redis - –º–æ–∫ cache operations
- HNSW - –º–æ–∫ vector operations

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- Pre-commit —Ö—É–∫–∏
- CI/CD pipeline
- Coverage thresholds
- Automated testing

## –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤

### Vector Store
```typescript
describe('HNSW Vector Store', () => {
  it('should initialize index', () => {
    // Test initialization
  });
  
  it('should add vectors', () => {
    // Test adding vectors
  });
  
  it('should search vectors', () => {
    // Test vector search
  });
  
  it('should fallback without hnswlib-node', () => {
    // Test fallback behavior
  });
});
```

### Admin Routes
```typescript
describe('Admin Conversations', () => {
  it('should create conversation', async () => {
    // Test POST /admin/conversations
  });
  
  it('should get conversations list', async () => {
    // Test GET /admin/conversations
  });
  
  it('should handle validation errors', async () => {
    // Test error handling
  });
});
```

## –û—Ç—á–µ—Ç –ø–æ–∫—Ä—ã—Ç–∏—è (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)
- Statements: 14.34%
- Branches: 43.89%
- Functions: 25.22%
- Lines: 14.34%
