# Панель операторов поддержки

## Описание

Интерфейс панели операторов для поддержки пользователей, созданный согласно техническому заданию. Панель позволяет операторам эффективно обрабатывать диалоги, которые были переданы от чат-бота.

## Архитектура

### Компоненты

- **ChatList** - список чатов с фильтрацией и поиском
- **ChatDialog** - основной диалог с пользователем
- **ToolsPanel** - панель инструментов (заметки, шаблоны, инструкции)
- **UserInfoPanel** - информация о пользователе
- **FiltersOverlay** - оверлей фильтров для списка чатов
- **Toast** - система уведомлений

### Контексты

- **ChatContext** - управление состоянием чатов и сообщений
- **ToastContext** - управление уведомлениями

## Функциональность

### Основные возможности

1. **Список чатов**
   - Отображение чатов с метаданными (статус, приоритет, источник)
   - Фильтрация по различным критериям
   - Поиск по имени, ID или тексту
   - Сортировка по активности и приоритету

2. **Диалог с пользователем**
   - Отображение истории сообщений
   - Отправка ответов
   - Принятие чата в работу
   - Создание кейсов

3. **Инструменты оператора**
   - Добавление внутренних заметок
   - Использование шаблонов ответов
   - Доступ к инструкциям
   - Прикрепление файлов
   - Улучшение ответов с помощью AI

4. **Информация о пользователе**
   - Профиль пользователя
   - Статистика (баланс, количество сделок)
   - Метки и флаги
   - Действия (блокировка, возвраты)

### Логика эскалации

Чат передается оператору при:
- Низкой уверенности бота
- Ключевых словах (жалоба, спор, платеж)
- Повторных неразрешенных сообщениях
- Запросе оператора
- Правилах приоритета

## Технические детали

### Стилизация

- **Цветовая схема**: светлый серый фон (#F6F7F8), белые карточки, синие акценты
- **Компоненты**: скругленные карточки (8-12px), легкие тени
- **Анимации**: мягкие fade/slide эффекты
- **Адаптивность**: поддержка desktop, tablet и mobile

### Состояния UI

- Загрузка/ошибки сети
- Индикаторы печати
- Статусы сообщений (отправлено/доставлено/прочитано)
- Уведомления о новых чатах

### Доступность

- ARIA-метки для всех интерактивных элементов
- Навигация с клавиатуры (Tab, Enter, Esc)
- Достаточный контраст цветов
- Подсказки и тултипы

## Быстрые клавиши

- **Ctrl/Cmd + K** - поиск по чатам
- **Ctrl + Enter** - отправить сообщение
- **Esc** - закрыть оверлей фильтров
- **1-9** - быстрый доступ к шаблонам

## Интеграция

### API контракты

Интерфейс готов к интеграции с реальными API через:
- WebSocket для realtime обновлений
- REST API для CRUD операций
- Server-Sent Events для streaming

### Заглушки

В текущей версии используются заглушки для:
- Списка чатов
- Сообщений
- Профилей пользователей
- Шаблонов и инструкций

## Установка и запуск

```bash
# Установка зависимостей
npm install

# Запуск в режиме разработки
npm run dev

# Сборка для продакшена
npm run build
```

## Структура файлов

```
src/
├── components/
│   ├── ChatList.tsx          # Список чатов
│   ├── ChatDialog.tsx        # Диалог с пользователем
│   ├── ToolsPanel.tsx        # Панель инструментов
│   ├── UserInfoPanel.tsx     # Информация о пользователе
│   ├── FiltersOverlay.tsx    # Оверлей фильтров
│   ├── Toast.tsx             # Система уведомлений
│   └── OperatorPanel.tsx     # Основной компонент
├── context/
│   ├── ChatContext.tsx       # Контекст чатов
│   └── ToastContext.tsx      # Контекст уведомлений
├── types/
│   └── chat.ts               # Типы данных
└── app/
    └── page.tsx              # Главная страница
```

## Расширение функциональности

### Добавление новых функций

1. Создать компонент в папке `components/`
2. Добавить типы в `types/chat.ts`
3. Обновить контекст при необходимости
4. Интегрировать в основной интерфейс

### Кастомизация стилей

Все стили определены в `tailwind.config.js` с кастомными цветами и анимациями. Для изменения дизайна достаточно обновить конфигурацию Tailwind.

## Поддержка

Интерфейс создан с учетом масштабируемости и может быть легко адаптирован под конкретные требования проекта.
