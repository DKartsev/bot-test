# üöÄ RAG –ü–∞–π–ø–ª–∞–π–Ω - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

## –ß—Ç–æ —ç—Ç–æ?

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ RAG —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º OpenAI GPT-4o mini –¥–ª—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
–í–æ–ø—Ä–æ—Å ‚Üí –ü–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞ ‚Üí –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ ‚Üí Draft ‚Üí RAG/Refine ‚Üí –û—Ç–≤–µ—Ç
```

## –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ OpenAI –ø–∞–∫–µ—Ç–∞
make rag-install-deps

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é
cd packages/backend && npm install openai@^4.20.1
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ `packages/backend/`:

```bash
# OpenAI
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-4o-mini
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MAX_TOKENS=4000
OPENAI_TEMPERATURE=0.3
OPENAI_TIMEOUT=30000
```

### 3. –ó–∞–ø—É—Å–∫ backend

```bash
# –°–±–æ—Ä–∫–∞
make rag-build

# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
make rag-start

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é
cd packages/backend && npm run dev
```

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞
make rag-health

# –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–π–ø–ª–∞–π–Ω–∞
make rag-test

# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è
make rag-demo
```

## API Endpoints

- `GET /api/rag/health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
- `POST /api/rag/query` - –û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø—Ä–æ—Å
- `POST /api/rag/test` - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- `GET /api/rag/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /api/rag/model-info` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–µ–ª–∏

## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Python

```python
from tools.bot_search import RAGClient

client = RAGClient("http://localhost:3000")

response = client.process_query(
    question="–ö–∞–∫ –ø–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å —á–µ—Ä–µ–∑ QR-–∫–æ–¥?",
    context="–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç—Å—è —Å–ø–æ—Å–æ–±–∞–º–∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è"
)

print(response["data"]["answer"])
```

### cURL

```bash
curl -X POST http://localhost:3000/api/rag/query \
  -H "Content-Type: application/json" \
  -d '{
    "question": "–ö–∞–∫ –ø–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å —á–µ—Ä–µ–∑ QR-–∫–æ–¥?",
    "context": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç—Å—è —Å–ø–æ—Å–æ–±–∞–º–∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è"
  }'
```

## –ö–æ–º–∞–Ω–¥—ã Make

```bash
make rag-install-deps    # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
make rag-build          # –°–±–æ—Ä–∫–∞
make rag-start          # –ó–∞–ø—É—Å–∫
make rag-test           # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
make rag-demo           # –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è
make rag-health         # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
make rag-stats          # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
make rag-model-info     # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–µ–ª–∏
```

## Troubleshooting

### OpenAI API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã API

### –°–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç 3000
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏

### –ù–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–µ—Å–∞ –ø–æ–∏—Å–∫–∞
- –£–ª—É—á—à–∏—Ç–µ –ø—Ä–æ–º–ø—Ç—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö
2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏
4. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `RAG_PIPELINE_README.md`
- –¢–µ—Å—Ç—ã: `tools/test_rag.py`
- –î–µ–º–æ: `tools/bot_search.py`
