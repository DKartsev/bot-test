OPENAI_API_KEY=
ADMIN_TOKENS=...
EDITOR_TOKENS=...
DEFAULT_LANG=ru
SUPPORTED_LANGS=ru,en,eo
ADMIN_IP_ALLOWLIST=127.0.0.1,::1
ADMIN_ALLOWED_ORIGINS=http://localhost:5173
ADMIN_RATE_WINDOW_MS=60000
ADMIN_RATE_MAX=60
AUTO_CACHE_OPENAI=1
SYNC_PROVIDER=
SYNC_CRON=
SYNC_BIDIRECTIONAL=0
SYNC_ALLOW_DELETES=0
GOOGLE_SHEETS_ID=
GOOGLE_APPLICATION_CREDENTIALS=/app/google-sa.json
GOOGLE_SERVICE_ACCOUNT_JSON_B64=
AIRTABLE_API_KEY=
AIRTABLE_BASE_ID=
AIRTABLE_TABLE_NAME=QA
FEEDBACK_PROMOTE_MIN=5
FEEDBACK_PROMOTE_RATIO=0.8
FEEDBACK_FLAG_MIN=5
FEEDBACK_FLAG_RATIO=0.3
FEEDBACK_ENABLE_AUTO=1
FEEDBACK_AGG_INTERVAL_MIN=5
VERSIONS_MAX=50
VERSIONS_TTL_DAYS=30
VERSIONS_DEBOUNCE_MS=500
VERSIONS_INCLUDE_PENDING=0
VERSIONS_REASON_ON_MUTATION=1
PORT=3000

# ---- Logging & rotation
OBS_ROTATE_INTERVAL=1d
OBS_ROTATE_SIZE=10M
OBS_ROTATE_MAX_FILES=14
OBS_CONSOLE_LEVEL=info
OBS_FILE_LEVEL=info

# ---- Loki shipping (optional)
LOKI_ENABLED=0
LOKI_URL=http://loki:3100/loki/api/v1/push
LOKI_BASIC_AUTH=
LOKI_MIN_LEVEL=info

# ---- Elasticsearch shipping (optional)
ELASTIC_ENABLED=0
ELASTIC_NODE=http://localhost:9200
ELASTIC_INDEX=my-support-bot-logs
ELASTIC_USERNAME=
ELASTIC_PASSWORD=
ELASTIC_MIN_LEVEL=info

# ---- Prometheus
PROM_ENABLED=1
PROM_METRICS_PATH=/metrics/prom

# ---- Telegram alerts
TELEGRAM_ALERTS_ENABLED=0
TG_BOT_TOKEN=
TG_CHAT_ID=
ALERT_EVAL_INTERVAL_SEC=60
ALERT_MIN_INTERVAL_SEC=600
ALERT_THRESH_ERROR_RATE=0.2
ALERT_THRESH_OPENAI_RATE=0.6
ALERT_THRESH_PENDING=50

# ---- Internal moving window for alert engine (seconds)
ALERT_WINDOW_SEC=300
# ----- Telegram (keep enabled)
TELEGRAM_ENABLED=1
TG_BOT_TOKEN=
TG_WEBHOOK_PATH=/webhooks/telegram
TG_WEBHOOK_PUBLIC_URL=
TG_ALLOWED_USER_IDS=
TG_ALERT_CHAT_ID=

# ----- Matrix (self-hosted)
MATRIX_ENABLED=1
MATRIX_HOMESERVER_URL=https://matrix.yourdomain.tld
MATRIX_ACCESS_TOKEN=syt_xxx
MATRIX_BOT_USER_ID=@supportbot:yourdomain.tld
MATRIX_ROOM_ID=!roomid:yourdomain.tld
MATRIX_ALLOWED_MXIDS=@op1:yourdomain.tld,@op2:yourdomain.tld
MATRIX_RATE_WINDOW_MS=60000
MATRIX_RATE_MAX=60

# ----- Internal admin API token used by integrations
OPERATOR_API_TOKEN=operator-internal-token

# ---- Semantic / embeddings
SEM_ENABLED=1
SEM_PROVIDER=local_xenova
SEM_MODEL_LOCAL=Xenova/all-MiniLM-L6-v2
OPENAI_EMBED_MODEL=text-embedding-3-small
SEM_INDEX_PATH=./data/semantic
SEM_TOPK=5
SEM_ALPHA=0.7
SEM_MIN_SIM=0.60
SEM_REBUILD_ON_START=1
SEM_BATCH_SIZE=64
SEM_CACHE=1

# ---- RAG
RAG_ENABLED=1
RAG_INDEX_PATH=./data/rag
RAG_CHUNK_SIZE=1200
RAG_CHUNK_OVERLAP=200
RAG_TOPK=6
RAG_MIN_SIM=0.62
RAG_MAX_CONTEXT_CHARS=9000
RAG_OPENAI_MODEL=gpt-4o-mini
RAG_TEMPERATURE=0.2
RAG_CITATIONS_STYLE=brackets
RAG_DIVERSIFY_BY_SOURCE=1
RAG_REBUILD_ON_START=1

# --- DLP core toggles
DLP_ENABLED=1
DLP_MODE=enforce               # "enforce" | "observe"
DLP_LOG_SAMPLE_RATE=1.0        # 0..1
DLP_MIN_SEVERITY=medium        # low|medium|high|critical

# --- Redaction & masking
DLP_REDACTION_STYLE=tag        # tag|mask
DLP_PARTIAL_MASK=1             # 1/0

# --- Allow/deny lists
DLP_ALLOW_EMAIL_DOMAINS=example.com,internal.local
DLP_ALLOW_TEST_CARDS=1         # ignore known test BINs

# --- Outgoing answer protection
DLP_BLOCK_SECRETS_OUT=1
DLP_BLOCK_PII_OUT=0
DLP_WARN_PROFANITY_OUT=1

# --- Ingestion (RAG) scanning
DLP_SCAN_INGEST=1
DLP_REDACT_INGEST=1

# --- Retention
DLP_HASH_SENSITIVE_IN_LOGS=1
DLP_TTL_DAYS=90
